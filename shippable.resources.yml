resources:

# resources for the box demo pipelines from CI thru TEST environment

################################

# 1) add visualizer resources to pipeline for CI

VISUALIZER RESOURCES
# REPO of VISUALIZER code
  - name: dv-repo
    type: gitRepo
    integration: ttrahan-beta-gh
    source:
      name: ttrahan-beta/dv
      branch: triton

# 2) add visualizer pipeline thru hub

# Docker Image for VISUALIZER
  - name: dv-img
    type: image
    integration: ttrahan-dh
    source:
      name: ttrahan/dv
      isPull: false
      tag: "triton.26"

# Docker Image Options for VISUALIZER
  - name: dv-img-opts
    type: dockerOptions
    source:
      memory: 128
      portMappings:
        - 80:80
      publishAllPorts : true

# ################################

# 3a) deploy VISUALIZER to TEST

# TEST env - AWS cluster
  - name: env-test-ecs
    type: ecsCluster
    integration: ttrahan-aws
    source:
      name : "demo-shippable-ecs-test"
      region: "us-east-1"

# # TEST env - TRITON CLUSTER
#   - name: env-test-triton
#     type: tripubCluster
#     integration: ttrahan-tpc
#     source:
#       region: "us-east-1"

# 3b) deploy VISUALIZER to TEST

# env vars for VISUALIZER
  - name: dv-params
    type: params
    source:
      params:
        MONGO_API_URL: "https://api.mlab.com/api/1/databases/box-pipev2/collections/boxes?apiKey=6Q_DxNm5eS5lrKc39KTILq_bpfq19L91"

# ################################

# 4a) add BOX resources to pipeline for Amazon ECS

# BOX RESOURCES
# # REPO of BOX code
#   - name: box-repo
#     type: gitRepo
#     integration: ttrahan-beta-gh
#     source:
#       name: ttrahan-beta/box
#       branch: triton
#
# # Docker Image for BOX
#   - name: box-img
#     type: image
#     integration: ttrahan-dh
#     source:
#       name: "ttrahan/box"
#       isPull: false
#       tag: "triton.latest"
#
# # Docker Image Options for BOX
#   - name: box-img-opts
#     type: dockerOptions
#     source:
#       memory: 64
#       cpu-shares: 512
#
# # TEST env vars for BOX
#   - name: box-t-params
#     type: params
#     source:
#       params:
#         DB_HOST: "ds017544.mlab.com"
#         DB_NAME: "box-pipev2"
#         DB_PORT: "17544"
#         DB_USERNAME: "demo"
#         DB_PASSWORD: "demo"
#
# # TEST env vars for BOX for Amazon ECS
#   - name: box-t-ecs-params
#     type: params
#     source:
#       params:
#         ENVIRONMENT: "test-ecs"

# # TEST env vars for BOX for Joyent Triton
#   - name: box-t-tpc-params
#     type: params
#     source:
#       params:
#         ENVIRONMENT: "test-triton"

# ################################
#
# # 5) add deploy config for PROD
# # REPO for PROD configs
#   - name: prod-repo
#     type: gitRepo
#     integration: ttrahan-beta-gh
#     source:
#       name: ttrahan-beta/prod
#       branch: triton
